{"ast":null,"code":"import _objectSpread from \"/Users/pablognecco/Dropbox (Personal)/Studio/Civic/pitch/framer-motion-bubbles/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/pablognecco/Dropbox (Personal)/Studio/Civic/pitch/framer-motion-bubbles/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/pablognecco/Dropbox (Personal)/Studio/Civic/pitch/framer-motion-bubbles/src/components/CompanyImage.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { getEmojiPlaceholder } from '../utils/emojiPlaceholders';\nvar CompanyImage = function CompanyImage(_ref) {\n  var company = _ref.company,\n    _ref$imageType = _ref.imageType,\n    imageType = _ref$imageType === void 0 ? 'logo' : _ref$imageType,\n    style = _ref.style,\n    className = _ref.className;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    imageSrc = _useState2[0],\n    setImageSrc = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    error = _useState4[0],\n    setError = _useState4[1];\n  useEffect(function () {\n    // Reset state when company or imageType changes\n    setImageSrc(null);\n    setError(false);\n    if (!company || !company.id) {\n      setError(true);\n      return;\n    }\n    var extensions = ['png', 'jpg', 'jpeg', 'svg', 'webp'];\n    var basePath = \"/images/companies/\".concat(imageType, \"s/\").concat(company.id);\n\n    // Set a preferred initial path. The onError will handle cycling through others.\n    var initialSrc = \"\".concat(basePath, \".\").concat(imageType === 'logo' ? 'png' : 'jpg');\n    setImageSrc(initialSrc);\n  }, [company, imageType]);\n  var handleError = function handleError() {\n    var currentSrc = imageSrc;\n    if (!currentSrc) {\n      setError(true);\n      return;\n    }\n    var extensions = ['png', 'jpg', 'jpeg', 'svg', 'webp'];\n    var currentExt = currentSrc.split('.').pop();\n    var currentIndex = extensions.indexOf(currentExt);\n\n    // Try the next extension in the list\n    if (currentIndex > -1 && currentIndex < extensions.length - 1) {\n      var nextExt = extensions[currentIndex + 1];\n      var nextSrc = currentSrc.replace(\".\".concat(currentExt), \".\".concat(nextExt));\n      setImageSrc(nextSrc);\n    } else {\n      // If we've tried all extensions, show the fallback\n      setError(true);\n    }\n  };\n  if (error || !imageSrc) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: _objectSpread({}, style, {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: 'var(--bg-secondary)',\n        fontSize: style && style.height ? style.height / 2 : '24px',\n        // Estimate font size from height\n        userSelect: 'none'\n      }),\n      className: className,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }\n    }, getEmojiPlaceholder(company));\n  }\n  return /*#__PURE__*/React.createElement(\"img\", {\n    src: imageSrc,\n    alt: \"\".concat(company.name, \" \").concat(imageType),\n    style: style,\n    className: className,\n    onError: handleError,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  });\n};\nexport default CompanyImage;","map":{"version":3,"names":["React","useState","useEffect","getEmojiPlaceholder","CompanyImage","_ref","company","_ref$imageType","imageType","style","className","_useState","_useState2","_slicedToArray","imageSrc","setImageSrc","_useState3","_useState4","error","setError","id","extensions","basePath","concat","initialSrc","handleError","currentSrc","currentExt","split","pop","currentIndex","indexOf","length","nextExt","nextSrc","replace","createElement","_objectSpread","display","alignItems","justifyContent","backgroundColor","fontSize","height","userSelect","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","name","onError"],"sources":["/Users/pablognecco/Dropbox (Personal)/Studio/Civic/pitch/framer-motion-bubbles/src/components/CompanyImage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getEmojiPlaceholder } from '../utils/emojiPlaceholders';\n\nconst CompanyImage = ({ company, imageType = 'logo', style, className }) => {\n  const [imageSrc, setImageSrc] = useState(null);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    // Reset state when company or imageType changes\n    setImageSrc(null);\n    setError(false);\n\n    if (!company || !company.id) {\n        setError(true);\n        return;\n    }\n\n    const extensions = ['png', 'jpg', 'jpeg', 'svg', 'webp'];\n    const basePath = `/images/companies/${imageType}s/${company.id}`;\n    \n    // Set a preferred initial path. The onError will handle cycling through others.\n    const initialSrc = `${basePath}.${imageType === 'logo' ? 'png' : 'jpg'}`;\n    setImageSrc(initialSrc);\n\n  }, [company, imageType]);\n\n  const handleError = () => {\n    const currentSrc = imageSrc;\n    if (!currentSrc) {\n        setError(true);\n        return;\n    }\n\n    const extensions = ['png', 'jpg', 'jpeg', 'svg', 'webp'];\n    const currentExt = currentSrc.split('.').pop();\n    const currentIndex = extensions.indexOf(currentExt);\n    \n    // Try the next extension in the list\n    if (currentIndex > -1 && currentIndex < extensions.length - 1) {\n        const nextExt = extensions[currentIndex + 1];\n        const nextSrc = currentSrc.replace(`.${currentExt}`, `.${nextExt}`);\n        setImageSrc(nextSrc);\n    } else {\n        // If we've tried all extensions, show the fallback\n        setError(true);\n    }\n  };\n\n  if (error || !imageSrc) {\n    return (\n      <div\n        style={{\n          ...style,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          backgroundColor: 'var(--bg-secondary)',\n          fontSize: (style && style.height) ? style.height / 2 : '24px', // Estimate font size from height\n          userSelect: 'none'\n        }}\n        className={className}\n      >\n        {getEmojiPlaceholder(company)}\n      </div>\n    );\n  }\n\n  return (\n    <img\n      src={imageSrc}\n      alt={`${company.name} ${imageType}`}\n      style={style}\n      className={className}\n      onError={handleError}\n    />\n  );\n};\n\nexport default CompanyImage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}